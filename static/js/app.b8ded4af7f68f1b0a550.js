webpackJsonp([1],{NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")({name:"App"},a,!1,function(e){n("gKPh")},null,null).exports,s=n("/ocq"),c=n("mvHQ"),i=n.n(c),l=n("Gu7T"),u=n.n(l),v=n("ZnLv"),h=n.n(v),d=["sine","square","triangle","sawtooth"],m={name:"HelloWorld",data:function(){return{title:"Chiptunes",trackLength:16,currentPosition:-1,currentTrack:0,tileColor:"orange",song:{title:null,author:null,bpm:h.a.Transport.bpm.value,tracks:[this.createTrack()]},selectedWaveform:"sine",note:"C4",noteLength:"4n",loop:null,channelSynths:null}},methods:{clicked:function(e){var t=e.target.id.split(":"),n=this.currentTrack,r=t[0],a=t[1],o=this.song.tracks[n][r][a];console.log("toggling - track: "+n+" channel: "+r+" slot: "+a),o.note?(o.note=null,o.instrument=null,o.length=null):(console.log("note: "+this.note+" instrument: "+this.selectedWaveform),o.note=this.note,o.instrument=this.selectedWaveform,o.length=this.noteLength)},selectTrack:function(e){var t=e.target.id;this.currentTrack=Number(t)},createTrack:function(){return[this.createChannel(0,16),this.createChannel(1,16),this.createChannel(2,16)]},createNote:function(e,t){return{note:null,length:null,instrument:null,channel:e,index:t}},createChannel:function(e,t){var n=this;return[].concat(u()(Array(t).keys())).map(function(t){return n.createNote(e,t)})},createSynth:function(e){return new h.a.Synth({oscillator:{type:e}}).toMaster()},createSnareSynth:function(){return new h.a.NoiseSynth({noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:0},volume:-8}).toMaster()},createSynths:function(){var e=this,t=d.reduce(function(t,n){return t[n]=e.createSynth(n),t},{});return t.snare=this.createSnareSynth(),t},createChannelSynths:function(){this.channelSynths={channel0:this.createSynths(),channel1:this.createSynths(),channel2:this.createSynths()}},play:function(){var e=this;"running"!==h.a.context.state&&h.a.context.resume();this.loop=new h.a.Sequence(function(){e.currentPosition===e.currentTrackLength-1?(e.currentTrack=e.currentTrack===e.song.tracks.length-1?0:e.currentTrack+1,e.currentPosition=0):e.currentPosition=e.currentPosition===e.currentTrackLength-1?0:e.currentPosition+1;var t=e.channelsForCurrentTrack;[t[0][e.currentPosition],t[1][e.currentPosition],t[2][e.currentPosition]].forEach(function(t){var n=e.channelSynths["channel"+t.channel];switch(t.instrument){case null:break;case"snare":n.snare.triggerAttackRelease();break;default:n[t.instrument].triggerAttackRelease(t.note,t.length)}})},[0],"4n").start(),h.a.Transport.start()},stop:function(){h.a.Transport.stop(),this.currentPosition=-1,null!==this.loop&&(this.loop.dispose(),this.loop=null)},addTrack:function(){this.song.tracks.push(this.createTrack())},increaseTrackLength:function(){var e=this;this.channelsForCurrentTrack.forEach(function(t,n){return t.push(e.createNote(n,t.length))})},decreaseTrackLength:function(){this.channelsForCurrentTrack.forEach(function(e){return e.pop()})}},computed:{songAsJson:{get:function(){return i()(this.song)},set:function(e){this.song=JSON.parse(e)}},channelsForCurrentTrack:function(){return this.song.tracks[this.currentTrack]},currentTrackLength:function(){return this.song.tracks[this.currentTrack][0].length},songBpm:function(){return this.song.bpm}},watch:{songBpm:function(e){h.a.Transport.bpm.value=e}},created:function(){this.createChannelSynths()}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v(e._s(e.title))]),e._v(" "),n("div",{staticClass:"tracker-container"},[n("div",{staticClass:"np-container"},e._l(e.currentTrackLength,function(t){return n("div",{key:"header-"+(t-1),class:"column-header column-header-"+(t-1===e.currentPosition?"active":"inactive")},[e._v(e._s((t<=16?"0":"")+(t-1).toString(16).toUpperCase()))])})),e._v(" "),n("div",{staticClass:"tracks-container"},e._l(e.channelsForCurrentTrack,function(t,r){return n("div",{key:r,staticClass:"track-container"},e._l(t,function(t,r){return n("div",{key:r,class:"grid-item grid-item-"+(t.note?"selected":"unselected"),attrs:{id:t.channel+":"+t.index},on:{click:e.clicked}},[e._v(e._s(t.note?t.note:""))])}))})),e._v(" "),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedWaveform,expression:"selectedWaveform"}],attrs:{type:"radio",id:"sine",value:"sine"},domProps:{checked:e._q(e.selectedWaveform,"sine")},on:{change:function(t){e.selectedWaveform="sine"}}}),e._v(" "),n("label",{attrs:{for:"sine"}},[e._v("Sine")]),e._v(" "),n("br"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedWaveform,expression:"selectedWaveform"}],attrs:{type:"radio",id:"square",value:"square"},domProps:{checked:e._q(e.selectedWaveform,"square")},on:{change:function(t){e.selectedWaveform="square"}}}),e._v(" "),n("label",{attrs:{for:"square"}},[e._v("Square")]),e._v(" "),n("br"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedWaveform,expression:"selectedWaveform"}],attrs:{type:"radio",id:"triangle",value:"triangle"},domProps:{checked:e._q(e.selectedWaveform,"triangle")},on:{change:function(t){e.selectedWaveform="triangle"}}}),e._v(" "),n("label",{attrs:{for:"triangle"}},[e._v("Triangle")]),e._v(" "),n("br"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedWaveform,expression:"selectedWaveform"}],attrs:{type:"radio",id:"sawtooth",value:"sawtooth"},domProps:{checked:e._q(e.selectedWaveform,"sawtooth")},on:{change:function(t){e.selectedWaveform="sawtooth"}}}),e._v(" "),n("label",{attrs:{for:"sawtooth"}},[e._v("Sawtooth")]),e._v(" "),n("br"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedWaveform,expression:"selectedWaveform"}],attrs:{type:"radio",id:"snare",value:"snare"},domProps:{checked:e._q(e.selectedWaveform,"snare")},on:{change:function(t){e.selectedWaveform="snare"}}}),e._v(" "),n("label",{attrs:{for:"snare"}},[e._v("Snare")]),e._v(" "),n("br"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.note,expression:"note"}],attrs:{type:"text",id:"note"},domProps:{value:e.note},on:{input:function(t){t.target.composing||(e.note=t.target.value)}}}),e._v(" "),n("label",{attrs:{for:"note"}},[e._v("Note")]),e._v(" "),n("br"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.noteLength,expression:"noteLength"}],attrs:{type:"text",id:"noteLength"},domProps:{value:e.noteLength},on:{input:function(t){t.target.composing||(e.noteLength=t.target.value)}}}),e._v(" "),n("label",{attrs:{for:"noteLength"}},[e._v("Length")]),e._v(" "),n("br"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.song.bpm,expression:"song.bpm"}],attrs:{type:"text",id:"bpm"},domProps:{value:e.song.bpm},on:{input:function(t){t.target.composing||e.$set(e.song,"bpm",t.target.value)}}}),e._v(" "),n("label",{attrs:{for:"bpm"}},[e._v("BPM")]),e._v(" "),n("br"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.songAsJson,expression:"songAsJson"}],attrs:{type:"text",id:"json"},domProps:{value:e.songAsJson},on:{input:function(t){t.target.composing||(e.songAsJson=t.target.value)}}}),e._v(" "),n("label",{attrs:{for:"json"}},[e._v("JSON")]),e._v(" "),n("br"),e._v(" "),n("button",{on:{click:e.play}},[e._v("Play")]),e._v(" "),n("br"),e._v(" "),n("button",{on:{click:e.stop}},[e._v("Stop")]),e._v(" "),n("br"),e._v(" "),n("button",{on:{click:e.addTrack}},[e._v("Add track")]),e._v(" "),n("div",e._l(e.song.tracks,function(t,r){return n("button",{key:r,attrs:{id:r},on:{click:e.selectTrack}},[e._v(e._s(r))])})),e._v(" "),n("button",{on:{click:e.increaseTrackLength}},[e._v("Increase track length")]),e._v(" "),n("br"),e._v(" "),n("button",{on:{click:e.decreaseTrackLength}},[e._v("Decrease track length")])])])])},staticRenderFns:[]};var g=n("VU/8")(m,p,!1,function(e){n("RhLk")},"data-v-b3015af8",null).exports;r.a.use(s.a);var f=new s.a({routes:[{path:"/",name:"HelloWorld",component:g}]});r.a.config.productionTip=!1,new r.a({el:"#app",router:f,components:{App:o},template:"<App/>"})},RhLk:function(e,t){},gKPh:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b8ded4af7f68f1b0a550.js.map